@model communityThrive2.Models.companyModel

@{
    ViewBag.Title = "ManageCompany";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>CreateCompany</h2>

@using (Html.BeginForm("ManageCompany", "Company", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>companyModel</h4>
        <hr />
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div class="form-group">
            @Html.LabelFor(model => model.companyName, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.companyName, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.companyName, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.companyDescription, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.companyDescription, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.companyDescription, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.companyDemographic, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                @Html.TextBoxFor(model => model.companyDemographic, new { htmlAttributes = new { @class = "form-control" } })
                @Html.ValidationMessageFor(model => model.companyDemographic, "", new { @class = "text-danger" })
            </div>
        </div>
        <div class="form-group">
            @Html.LabelFor(model => model.companyLogo, htmlAttributes: new { @class = "control-label col-md-2" })
            <div class="col-md-10">
                <style type="text/css">
                    body {
                        font-family: Arial;
                        font-size: 10pt;
                    }

                    #dvPreview {
                        filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image);
                        min-height: 150px;
                        min-width: 150px;
                        display: none;
                    }
                </style>
                <script src="~/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
                <script type="text/javascript">
                    function showpreview(input) {

                        if (input.files && input.files[0]) {

                            var reader = new FileReader();
                            reader.onload = function (e) {
                                $('#imgpreview').css('visibility', 'visible');
                                $('#imgpreview').attr('src', e.target.result);
                            }

                            reader.readAsDataURL(input.files[0]);
                            reader.result()
                        }

                    }

                </script>
            </div>
            <form id="form1" runat="server">
                <div>
                    <input class="col-md-2 col-md-10" id="fuimage" type="file" onchange="showpreview(this);" />
                    <img id="imgpreview" height="150" width="150" src="" style="border-width: 0px; visibility: hidden;" />
                </div>
            </form>
            <script>
                //Callback handler for form submit event
                $("#multiform").submit(function (e) {

                    var formObj = $(this);
                    var formURL = formObj.attr("action");
                    var formData = new FormData(this);
                    $.ajax({
                        url: formURL,
                        type: 'POST',
                        data: formData,
                        mimeType: "multipart/form-data",
                        contentType: false,
                        cache: false,
                        processData: false,
                        success: function (data, textStatus, jqXHR) {

                        },
                        error: function (jqXHR, textStatus, errorThrown) {
                        }
                    });
                    e.preventDefault(); //Prevent Default action.
                    e.unbind();
                });
                $("#multiform").submit(); //Submit the form
            </script>
            <div class="form-group">
                <div class="col-md-2 col-md-10">
                    <input type="submit" class="btn btn-default" value="Save Changes" />
                </div>
            </div>
        </div>
        </div>
        }

